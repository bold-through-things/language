67lang:file
	local myURL
		local _0x0_URL
			67lang:call URL
				string "https://example.com/path?query=123"

			67lang:auto_type

	local _0x3_print
		67lang:call print
			noscope
				local _0x4_myURL
					67lang:call myURL

					67lang:auto_type

			local _0x5_pathname
				67lang:call pathname
					67lang:call _0x4_myURL

				67lang:auto_type

		67lang:auto_type

	local _0xb_print
		67lang:call print
			string "\n--- Testing TextEncoder/TextDecoder ---"

		67lang:auto_type

	local encoder
		67lang:auto_type

		local _0xd_TextEncoder
			67lang:call TextEncoder

			67lang:auto_type

	local decoder
		67lang:auto_type

		local _0x10_TextDecoder
			67lang:call TextDecoder

			67lang:auto_type

	local text_tests
		list
			string "ASCII text"

			string "Unicode: ðŸ¦• Deno"

			string "Numbers: 42"

	for text in
		67lang:assume_local_exists text

		local _0x14_text_tests
			67lang:call text_tests

			67lang:auto_type

		do
			local bytes
				noscope
					local _0x16_encoder
						67lang:call encoder

						67lang:auto_type

				local _0x17_encode
					67lang:call encode
						67lang:call _0x16_encoder

						local _0x19_text
							67lang:call text

							67lang:auto_type

					67lang:auto_type

			local restored
				noscope
					local _0x1e_decoder
						67lang:call decoder

						67lang:auto_type

				local _0x1f_decode
					67lang:call decode
						67lang:call _0x1e_decoder

						local _0x21_bytes
							67lang:call bytes

							67lang:auto_type

					67lang:auto_type

			local _0x26_print
				67lang:call print
					string `Text: "`

					local _0x27_text
						67lang:call text

						67lang:auto_type

					string `" -> Bytes: [`

					local _0x29_bytes
						67lang:call bytes

						67lang:auto_type

					string `] -> Restored: "`

					local _0x2b_restored
						67lang:call restored

						67lang:auto_type

				67lang:auto_type

	local _0x31_print
		67lang:call print
			string "\n--- Testing atob/btoa ---"

		67lang:auto_type

	local testString
		string "Hello World"

	local encodedString
		local _0x34_btoa
			67lang:call btoa
				local _0x35_testString
					67lang:call testString

					67lang:auto_type

			67lang:auto_type

	local decodedString
		local _0x3a_atob
			67lang:call atob
				local _0x3b_encodedString
					67lang:call encodedString

					67lang:auto_type

			67lang:auto_type

	local _0x40_print
		67lang:call print
			string "Original: "

			local _0x41_testString
				67lang:call testString

				67lang:auto_type

			string " -> Encoded: "

			local _0x43_encodedString
				67lang:call encodedString

				67lang:auto_type

			string " -> Decoded: "

			local _0x45_decodedString
				67lang:call decodedString

				67lang:auto_type

		67lang:auto_type


