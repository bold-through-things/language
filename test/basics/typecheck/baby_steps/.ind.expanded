PIL:solution
	PIL:file
		# these are expected to pass

		do
			local test
				type int

				int 0

			local test_1
				type int

				local _0x0__test
					PIL:access_local test

					PIL:auto_type

			local _0x2__test
				PIL:access_local test
					local _0x1__test_1
						PIL:access_local test_1

						PIL:auto_type

				PIL:auto_type

			do
				local test_1
					type int

					local _0x3__test
						PIL:access_local test

						PIL:auto_type

				local _0x5__test
					PIL:access_local test
						local _0x4__test_1
							PIL:access_local test_1

							PIL:auto_type

					PIL:auto_type

		# these are expected to fail

		do
			local test
				type int

				string "test"

		do
			local test_str
				type str

				# TODO - since we do not null by default - this should here also error!

			local test_int
				type int

				local _0x6__test_str
					PIL:access_local test_str

					PIL:auto_type

			local _0x8__test_int
				PIL:access_local test_int
					local _0x7__test_str
						PIL:access_local test_str

						PIL:auto_type

				PIL:auto_type

			do
				local _0x9__test_str
					PIL:access_local test_str
						int 0

					PIL:auto_type

				local test_bool
					type bool

					local _0xa__test_str
						PIL:access_local test_str

						PIL:auto_type

				local _0xf__test_bool
					PIL:access_local test_bool
						noscope
							local _0xb__test_str
								PIL:access_local test_str

								PIL:auto_type

							local _0xc__split
								PIL:call split
									PIL:access_local _0xb__test_str

								PIL:auto_type

							local _0xd__sort
								PIL:call sort
									PIL:access_local _0xc__split

								PIL:auto_type

						local _0xe__join
							PIL:call join
								PIL:access_local _0xd__sort

							PIL:auto_type

					PIL:auto_type

				noscope
					local _0x10__test_bool
						PIL:access_local test_bool

						PIL:auto_type

				local _0x11__split
					PIL:call split
						PIL:access_local _0x10__test_bool

					PIL:auto_type

				noscope
					local _0x12__test_str
						PIL:access_local test_str

						PIL:auto_type

					local _0x13__split
						PIL:call split
							PIL:access_local _0x12__test_str

						PIL:auto_type

					local _0x14__split
						PIL:call split
							PIL:access_local _0x13__split

						PIL:auto_type

				local _0x15__split
					PIL:call split
						PIL:access_local _0x14__split

					PIL:auto_type


